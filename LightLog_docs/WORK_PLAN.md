# LightLog 프로젝트 작업 계획서 (WORK_PLAN)

## ~~Phase 1: 프로젝트 기획 및 프론트엔드 프로토타이핑 (완료)~~

- ~~[x] `LightLog_FE`, `LightLog_BE` 레포지토리 초기화~~
- ~~[x] `PROJECT_PLAN.md`: 프로젝트 초기 기획~~
- ~~[x] `fe_guide.md`: 프론트엔드 상세 기획 및 UI/UX 정책 수립~~
- ~~[x] 프론트엔드 메인 화면 UI 프로토타입 구현~~
  - ~~[x] 컴포넌트 분리 및 구조화~~
  - ~~[x] 온보딩 모달(어제 하루 요약) 플로우 및 애니메이션 구현~~
  - ~~[x] `AsyncStorage`를 이용한 온보딩 완료 상태 영속성 처리~~

---

## ~~Phase 2: 백엔드 핵심 기능 구현 (완료)~~

- ~~[x] `LightLog_BE`: Spring Boot, Kotlin, Gradle 프로젝트 초기 설정~~
- ~~[x] Spring Security 및 JWT(JSON Web Token) 라이브러리 추가, 보안 설정 구성~~
- ~~[x] 사용자(`User`) 관련 기능 구현~~
  - ~~[x] `User` Entity, `UserRepository` 생성~~
  - ~~[x] `AuthController`, `AuthService` 구현 (회원가입, 로그인 API)~~
- ~~[x] 일기(`Diary`) 관련 기능 구현~~
  - ~~[x] `Diary` Entity, `DiaryRepository` 생성~~
  - ~~[x] `DiaryController`, `DiaryService` 구현 (기본적인 CRUD API)~~

---

## ~~Phase 3: 프론트엔드-백엔드 연동 (완료)~~

- ~~[x] 프론트엔드: `axios`를 이용한 API 클라이언트 설정~~
- ~~[x] 프론트엔드: `Zustand`를 이용한 전역 상태 관리 (인증 토큰, 사용자 정보)~~
- ~~[x] 회원가입/로그인 화면 UI 구현~~
- ~~[x] 회원가입/로그인 기능 연동 (API 호출, JWT 토큰 저장/관리)~~
- ~~[x] 아이디/닉네임 중복 체크 기능 구현~~
- ~~[x] 비밀번호 보기 토글 기능 추가~~
- ~~[x] 로그인/회원가입 프로세스 UX 고도화~~
  - ~~[x] 회원가입 완료 후 적절한 피드백 및 화면 전환 개선~~
  - ~~[x] 로그인 실패 시 에러 메시지 개선~~
  - ~~[x] 폼 검증 UX 개선 (실시간 검증 vs 제출 시 검증)~~
- ~~[x] 인증 화면 스타일 개선~~
  - ~~[x] 일관된 디자인 시스템 적용~~
  - ~~[x] 반응형 레이아웃 개선~~
  - ~~[x] 접근성(Accessibility) 고려~~
- ~~[x] 메인 화면과 백엔드 연동~~
  - ~~[x] 앱 실행 시, 실제 '어제 일기' 데이터 조회 API 호출~~
  - ~~[x] 온보딩 모달에서 '하루 요약 보기' 선택 시, 백엔드에 요약 요청 API 호출~~

---

## ~~Phase 4: 일기 관리 및 조회 기능 구현 (완료)~~

### ~~4.1 일기 작성 기능 (완료)~~
- ~~[x] `DiaryWriteScreen`: 일기 작성 화면 UI 및 기능 구현~~
  - ~~[x] 텍스트 입력, 저장, 수정 기능 (하루에 하나의 일기만 작성 가능)~~
  - ~~[x] 자동으로 기존 일기 불러오기 및 수정 모드 전환~~
  - ~~[x] 작성 날짜 선택 기능 (`@react-native-community/datetimepicker` 사용)~~
  - ~~[x] Zustand 스토어와 연동하여 상태 관리 개선~~
  - [ ] 임시 저장 기능 (선택사항)

### ~~4.2 달력 기반 일기 조회 (완료)~~
- ~~[x] `CalendarScreen`: 달력 UI 및 데이터 연동 기능 구현~~
  - ~~[x] `react-native-calendars` 라이브러리 사용~~
  - ~~[x] 일기 작성된 날짜에 점 표시~~
  - ~~[x] 특정 날짜 클릭 시 해당 일기 조회 및 표시~~
  - ~~[x] 월/년도 네비게이션 기능~~
  - ~~[x] 선택된 날짜의 일기 내용 미리보기~~

### ~~4.3 과거 일기 빠른 조회 기능 (완료)~~
- ~~[x] 백엔드: 과거 일기 조회 API 구현~~
  - ~~[x] 1개월 전 같은 날 일기 조회 API~~
  - ~~[x] 3개월 전 같은 날 일기 조회 API~~  
  - ~~[x] 6개월 전 같은 날 일기 조회 API~~
  - ~~[x] 1년 전 같은 날 일기 조회 API~~
  - ~~[x] `/api/diaries/past` 엔드포인트로 모든 과거 일기 조회~~
- ~~[x] 프론트엔드: 과거 일기 조회 UI 구현~~
  - ~~[x] 메인 화면에 "과거의 오늘" 섹션 추가 (`PastDiariesView` 컴포넌트)~~
  - ~~[x] 가로 스크롤 카드 형태로 과거 일기 미리보기~~
  - ~~[x] 과거 일기 상세 보기 모달~~

### ~~4.4 네비게이션 및 화면 구조 (완료)~~
- ~~[x] 하단 탭 네비게이션 구현~~
  - ~~[x] 홈, 일기쓰기, 달력, 설정 탭~~
  - ~~[x] React Native Vector Icons 적용 (Ionicons)~~
- ~~[x] 화면 간 데이터 전달 및 상태 관리~~
  - ~~[x] Zustand 기반 전역 상태 관리 구조 개선~~
  - ~~[x] 일기 상태 관리 스토어 (`diaryStore`) 확장~~

---

## ~~Phase 5: 부가 기능 및 사용자 경험 개선 (완료)~~

- ~~[x] 백엔드 DTO 구조 개선 (별도 패키지 분리)~~
- ~~[x] `SearchScreen`: 일기 검색 화면 UI 구현~~
- ~~[x] `StatisticsScreen`: 일기 통계 화면 UI 구현~~
- ~~[x] `NotificationSettingsScreen`: 푸시 알림 설정 화면 UI 구현~~
- ~~[x] `SettingsScreen`: 설정 화면 UI 및 기능 구현 (로그아웃 등)~~
- ~~[x] 백엔드: 일기 검색 API 구현 (`/api/diaries/search`)~~
- ~~[x] 백엔드: 일기 통계 API 구현 (`/api/diaries/statistics`)~~
- ~~[x] 푸시 알림 기능 구현 (일기 작성 리마인더)~~
- ~~[x] 화면 간 데이터 전달 및 상태 관리 (TabNavigator 연동)~~
- ~~[x] 데이터 백업/복원 기능~~
  - ~~[x] 백엔드: 데이터 export/import API 구현~~
  - ~~[x] 프론트엔드: 파일 업로드/다운로드 기능 구현~~
  - ~~[x] SettingsScreen에 백업/복원 UI 연동~~
- ~~[x] 전체 UI/UX 최종 검토 및 개선~~
  - ~~[x] 테마 시스템 확장 (spacing, typography, shadows)~~
  - ~~[x] 공통 컴포넌트 구현 (Button, Card, LoadingOverlay, ErrorMessage, EmptyState)~~
  - ~~[x] 일관된 디자인 시스템 적용~~

### ~~📋 코딩 표준 및 구조 규칙 (완료)~~
- ~~[x] `CODING_STANDARDS.md`: DTO 분리 원칙 및 패키지 구조 규칙 문서화~~
- ~~[x] 모든 data class를 dto 패키지로 분리 완료~~
  - ~~[x] `ImportResult`, `ModerationRequest/Result/Response` 분리~~
  - ~~[x] `ChatGPT*` 관련 클래스들 분리~~
  - ~~[x] `UserProfileResponse`, `UpdateAiToneRequest` 분리~~
- ~~모든 새로운 코드는 [CODING_STANDARDS.md](./CODING_STANDARDS.md)를 따라야 함~~

---

## ~~Phase 6: 핵심 AI 기능 구현 (완료)~~

- ~~[x] 백엔드: `ModerationService` 구현 (사용자 입력 유해성 검사)~~
  - ~~[x] OpenAI Moderation API 연동~~
- ~~[x] 백엔드: `AIService` 구현 (ChatGPT API 연동)~~
  - ~~[x] 프롬프트 엔지니어링을 통해 서비스 톤앤매너에 맞는 결과물 생성 로직 구현~~
- ~~[x] 백엔드: AI 요약 API 구현~~
  - ~~[x] 체크리스트 기반 요약 API (기존 summary 엔드포인트 AI 기반으로 업그레이드)~~
  - ~~[x] 전체 일기 기반 긍정 재해석 API~~
- ~~[x] 프론트엔드: `DiaryWriteScreen`과 AI 기능 연동~~
  - ~~[x] AI 긍정적 재해석 모달 구현~~
  - ~~[x] DiaryWriteScreen에 AI 기능 버튼 추가~~

### ~~Phase 6.5: AI 기능 확장 (완료)~~
- ~~[x] AI 톤 설정 기능 구현~~
  - ~~[x] 백엔드: User 엔터티에 AI 톤 필드 추가~~
  - ~~[x] 백엔드: 톤별 프롬프트 시스템 구현 (상담사/친구 모드)~~
  - ~~[x] 백엔드: AI 톤 변경 API 구현 (하루 1회 제한)~~
  - ~~[x] 프론트엔드: 설정 화면에 AI 톤 선택 UI 구현~~
  - ~~[x] `AIToneSelector` 컴포넌트 구현~~
- ~~[x] AI 일일 피드백 기능 구현~~
  - ~~[x] 백엔드: 일일 피드백 생성 API 구현 (`/api/diaries/daily-feedback`)~~
  - ~~[x] 프론트엔드: `DailyFeedbackModal` 컴포넌트 구현~~
  - ~~[x] 일기 작성 화면에 AI 피드백 버튼 추가~~
- ~~[x] 설정 분리 및 보안 개선~~
  - ~~[x] `application-secret.properties` 파일 생성 (OpenAI API 키 및 프롬프트 관리)~~
  - ~~[x] `.gitignore`에 민감한 설정 파일 추가~~
  - ~~[x] 톤별 프롬프트 설정 시스템 구현~~

---

## Phase 7: 테스트 및 배포 (진행 예정)

- [ ] 백엔드 테스트 작성
  - [ ] 단위 테스트 (Service, Repository 레이어)
  - [ ] 통합 테스트 (Controller, API 엔드포인트)
  - [ ] AI 기능 테스트 (Mock 처리)
- [ ] 프론트엔드 테스트 작성
  - [ ] 컴포넌트 단위 테스트
  - [ ] 화면 통합 테스트
  - [ ] E2E 테스트 (핵심 플로우)
- [ ] 성능 최적화
  - [ ] 백엔드 최적화 (DB 쿼리, 캐싱)
  - [ ] 프론트엔드 최적화 (번들 크기, 렌더링)
  - [ ] AI API 호출 최적화
- [ ] 배포 준비
  - [ ] 백엔드 배포 환경 구성
  - [ ] 프론트엔드 빌드 및 배포
  - [ ] 환경별 설정 관리

---

---

## Phase 8: 음성 인식 기능 구현 (상세 개발 계획)

### 🚀 개발 순서 및 우선순위

#### **1단계: 환경 설정 및 기반 구축**
- [ ] React Native 음성 관련 라이브러리 설치
  - [ ] `react-native-audio-recorder-player` 설치 및 설정
  - [ ] `react-native-permissions` 설치 (마이크 권한 관리)
  - [ ] iOS/Android 네이티브 설정 (Info.plist, AndroidManifest.xml)
- [ ] 권한 처리 시스템 구현
  - [ ] 마이크 권한 요청 유틸리티 함수 작성
  - [ ] 권한 거부 시 안내 모달 구현
- [ ] 백엔드 OpenAI Whisper API 연동 준비
  - [ ] OpenAI API 키 설정 (`application-secret.properties`)
  - [ ] Multipart 파일 업로드 설정

#### **2단계: 백엔드 음성 처리 API 구현**
- [ ] 음성 파일 업로드 API 구현
  - [ ] `/api/diaries/voice-upload` 엔드포인트 생성
  - [ ] 파일 크기 및 형식 검증 (최대 25MB, mp3/wav/m4a)
  - [ ] 임시 파일 저장 로직 구현
- [ ] OpenAI Whisper API 연동 서비스
  - [ ] `VoiceService` 클래스 생성
  - [ ] STT 변환 메소드 구현 (`convertSpeechToText`)
  - [ ] 다국어 지원 (한국어 우선, 자동 언어 감지)
- [ ] 오류 처리 및 로깅
  - [ ] 음성 변환 실패 시 예외 처리
  - [ ] 변환 결과 검증 로직 (빈 텍스트, 너무 짧은 결과 등)
  - [ ] 임시 파일 자동 삭제 스케줄링

#### **3단계: 프론트엔드 기본 음성 녹음 구현**
- [ ] `VoiceRecorder` 컴포넌트 개발
  - [ ] 녹음 시작/중지/일시정지 버튼 UI
  - [ ] 실시간 녹음 시간 표시 (MM:SS 형식)
  - [ ] 녹음 상태 시각적 표시 (녹음 중 애니메이션)
- [ ] 녹음 파일 관리
  - [ ] 로컬 파일 저장 경로 설정
  - [ ] 녹음 파일 재생 기능 (미리듣기)
  - [ ] 녹음 파일 삭제 기능
- [ ] 기본 음성 녹음 테스트 및 디버깅
  - [ ] 다양한 기기에서 녹음 품질 테스트
  - [ ] 파일 크기 및 길이 제한 설정

#### **4단계: 음성-텍스트 변환 플로우 구현**
- [ ] 전체 변환 플로우 구현
  - [ ] 녹음 완료 → 파일 업로드 → STT 요청 → 텍스트 반환
  - [ ] `useVoiceToText` 커스텀 훅 개발
  - [ ] Zustand 스토어에 음성 관련 상태 추가
- [ ] 로딩 및 진행률 표시
  - [ ] 업로드 진행률 표시 (progress bar)
  - [ ] STT 변환 중 로딩 스피너 및 안내 메시지
  - [ ] 전체 변환 과정 단계별 표시
- [ ] 에러 핸들링 및 재시도
  - [ ] 네트워크 오류, API 오류별 처리
  - [ ] 자동 재시도 로직 (최대 3회)
  - [ ] 사용자 친화적 에러 메시지
- [ ] `DiaryWriteScreen` 음성 입력 모드 통합
  - [ ] 텍스트/음성 입력 모드 토글 버튼
  - [ ] 변환된 텍스트 기존 에디터에 삽입/대체 옵션
  - [ ] 음성 입력 모드 UI 상태 관리

#### **5단계: UX/UI 개선 및 고급 기능**
- [ ] 시각적 피드백 강화
  - [ ] 마이크 아이콘 녹음 중 애니메이션 (맥박, 파형)
  - [ ] 음성 레벨 시각화 (볼륨 표시)
  - [ ] 녹음 완료 시 성공 애니메이션
- [ ] 음성 품질 가이드 시스템
  - [ ] 첫 사용 시 가이드 모달 (조용한 환경, 명확한 발음)
  - [ ] 녹음 환경 체크 기능 (주변 소음 레벨)
  - [ ] 음성 품질 팁 제공
- [ ] 고급 처리 기능
  - [ ] 긴 음성 파일 자동 분할 업로드 (5분 단위)
  - [ ] 변환된 텍스트 편집 모드 (STT 오류 수정)
  - [ ] 음성과 텍스트 동기화 표시

#### **6단계: 설정 및 개인화 옵션**
- [ ] 음성 인식 설정 화면 구현
  - [ ] 음성 인식 언어 선택 (한국어, 영어, 자동감지)
  - [ ] 음성 입력 기본 모드 설정 (텍스트 우선/음성 우선)
  - [ ] 음성 파일 자동 삭제 옵션 (즉시/1일 후/수동)
- [ ] 사용성 개선
  - [ ] 음성 기능 온보딩 튜토리얼
  - [ ] 사용 통계 표시 (변환 성공률, 사용 횟수)
  - [ ] 개인화된 사용 패턴 분석

#### **7단계: 오프라인 지원 및 동기화**
- [ ] 오프라인 모드 구현
  - [ ] 오프라인 상태에서 음성 파일 로컬 저장
  - [ ] 온라인 복귀 시 자동 동기화 큐
  - [ ] 동기화 실패 시 재시도 메커니즘
- [ ] 로컬 데이터 관리
  - [ ] 로컬 음성 파일 캐시 관리
  - [ ] 저장 공간 최적화 (오래된 파일 자동 정리)

#### **8단계: 성능 최적화 및 테스트**
- [ ] 성능 최적화
  - [ ] 음성 파일 압축 최적화 (품질 vs 크기)
  - [ ] 배터리 사용량 최적화 (녹음 중 절전 모드)
  - [ ] 메모리 사용량 모니터링 및 최적화
- [ ] 품질 보장 테스트
  - [ ] 다양한 환경에서 음성 인식 정확도 테스트
  - [ ] 다양한 기기(iOS/Android, 구형/신형)에서 호환성 테스트
  - [ ] 네트워크 상태별 테스트 (Wi-Fi, 4G, 불안정한 연결)
- [ ] 사용자 피드백 수집
  - [ ] 음성 인식 정확도 평가 기능
  - [ ] 사용자 만족도 조사 모달
  - [ ] 개선점 수집 시스템

### 🎯 핵심 성공 지표
- [ ] 음성 인식 정확도 95% 이상 달성
- [ ] 평균 변환 시간 10초 이내
- [ ] 사용자 재사용률 80% 이상
- [ ] 앱 크래시율 0.1% 이하 유지

### ⚠️ 주요 고려사항
- **개인정보 보호**: 음성 파일은 변환 후 즉시 삭제, 서버에 저장하지 않음
- **데이터 사용량**: Wi-Fi 환경 권장, 모바일 데이터 사용 시 경고
- **배터리 최적화**: 장시간 녹음 시 배터리 소모 최소화
- **접근성**: 청각 장애인을 위한 대체 입력 방법 제공

---

## 📊 현재 진척도 요약

**완료된 Phase:**
- ~~✅ Phase 1: 프로젝트 기획 및 프론트엔드 프로토타이핑~~
- ~~✅ Phase 2: 백엔드 핵심 기능 구현~~  
- ~~✅ Phase 3: 프론트엔드-백엔드 연동~~
- ~~✅ Phase 4: 일기 관리 및 조회 기능 구현~~
- ~~✅ Phase 5: 부가 기능 및 사용자 경험 개선~~
- ~~✅ Phase 6: 핵심 AI 기능 구현~~
- ~~✅ Phase 6.5: AI 기능 확장~~

**다음 단계:** Phase 7 (테스트 및 배포), Phase 8 (음성 인식 기능)

**주요 완성 기능:**
- ~~🔐 사용자 인증 시스템 (회원가입, 로그인, JWT)~~
- ~~📝 일기 작성/수정/조회 시스템~~
- ~~📅 달력 기반 일기 관리~~
- ~~🔍 일기 검색 및 통계~~
- ~~📊 사용자 통계 대시보드~~
- ~~🤖 AI 기능 (요약, 긍정 재해석, 일일 피드백)~~
- ~~⚙️ AI 톤 설정 (상담사/친구 모드, 하루 1회 제한)~~
- ~~💾 데이터 백업/복원~~
- ~~🔔 알림 설정~~
- ~~🎨 일관된 UI/UX 디자인 시스템~~
